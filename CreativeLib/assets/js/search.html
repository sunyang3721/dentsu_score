<!DOCTYPE html><html><head><meta charset="utf-8"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>search</title></head><body><article class="markdown-body"><p>//<br />
//                       <em>oo0oo</em><br />
//                      o8888888o<br />
//                      88&rdquo; . &ldquo;88<br />
//                      (| -<em>- |)<br />
//                      0\  =  /0<br />
//                    <strong><em>/<code>---'\___
//                  .' \\|     |// '.
//                 / \\|||  :  |||// \
//                / _||||| -:- |||||- \
//               |   | \\\  -  /// |   |
//               | \_|  ''\---/''  |_/ |
//               \  .-\__  '-'  ___/-. /
//             ___'. .'  /--.--\</code>. .&rsquo;</em></strong><br />
//          .&rdquo;&rdquo; &lsquo;&lt;  <code>.___\_&lt;|&gt;_/___.' &gt;' "".
//         | | :</code>- `.;<code>\ _ /</code>;.<code>/ -</code> : | |<br />
//         \  \ <code>_.   \_ __\ /__ _/   .-</code> /  /<br />
//     =====<code>-.____</code>.<strong><em> _</em></strong></em>/___.-<code>___.-'=====
//</code>=&mdash;=&rsquo;<br />
//<br />
//<br />
//     <del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del>~~~<br />
//<br />
//               佛祖保佑         永无BUG<br />
//<br />
//<br />
//<br />
$(function() {<br />
        //判断登陆<br />
        $.ajaxSetup({ <br />
           contentType:&rdquo;application/x-www-form-urlencoded;charset=utf-8&rdquo;, <br />
           complete:function(XMLHttpRequest,textStatus){ <br />
             var sessionstatus=XMLHttpRequest.getResponseHeader(&ldquo;sessionstatus&rdquo;); //通过XMLHttpRequest取得响应头，sessionstatus，<br />
                 if(sessionstatus != &ldquo;200&rdquo;){ <br />
                        layer.msg(&lsquo;登陆已过期,正在刷新重新登陆&hellip;&rsquo;, {icon: 0});<br />
                        setTimeout(function () {<br />
                            //如果超时就处理 ，指定要跳转的页面<br />
                            window.location = &ldquo;../userLogin.do&rdquo;; <br />
                        }, 1000);<br />
                    }<br />
              } <br />
         })</p>
<pre><code>$.ajax({
    url:'../findUserInfo.do',
    dataType:'json',
    success:function(data){
        $('#usermail').text(data['userInfo']['m_userEmail']);
    }
})
numloadCount = 20; //每页显示20条 全局定义
ajaxpost(1);
$('title').append(function(){
    var keyword = getQueryString("inputKeyWord");
    if(keyword == '' || keyword == null){
        return '所有结果';
    }else{
        return '"'+keyword+'"结果';
    }
});
//屏蔽右键
function stop(){
    return false;
}
document.oncontextmenu=stop;

//New pictures tab
$('.newlist').click(function() {
    $('#view').val('0');
    $('#publishsortFlag').val('0');
    $('#creatsortFlag').val('1');

    clear_list();
    ajaxpost(1);
})

//Hot pictures tab
$('.hotlist').click(function() {
    $('#view').val('1');
    $('#publishsortFlag').val('0');
    $('#creatsortFlag').val('1');
    clear_list();
    ajaxpost(1);
})

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:07:22
 * @description: 列表 缩略图 指定分页输出
 */
function ajaxpost(page){
    var url = '../queryWorksInfoList.do';
    var param = location.search;
    var view = $('#view').val();  //orderFlag 0 为 new 排序  1 为 hot 排序 2 为 上传日期 排序
    var sortFlag = 0; // 0为降序 1为升序
    if (view == 2) {
        sortFlag = $('#creatsortFlag').val();
    } else {
        sortFlag = $('#publishsortFlag').val();
    }
    var type = $('#type').val();  // 0 为 列表显示  1 为 缩略图显示
    loading_page('Loading......');
    $.ajax(url+param,{
        type:'post',
        dataType:'json',
        data:{pageNum:page,orderFlag:view,loadCount:numloadCount,sortFlag:sortFlag},
        success:function(data){
            stop = true; //无线滚动加载 锁定
            $('#conts').html('共检索出 &lt;b&gt;'+data['worksCnt']+'&lt;/b&gt; 条结果')
            switch(type){
                case '0' :
                if(page == '1'){
                    var orderTU,orderDU;
                    if(view != 1){
                        if(sortFlag == 1 &amp;&amp; view == 0){
                            orderTU = "&lt;a href='#' id='publisDT' class='publisDT'&gt;发布时间 &lt;i class='glyphicon glyphicon-sort-by-attributes'&gt;&lt;/i&gt;&lt;/a&gt;";
                        }else if(sortFlag == 0 &amp;&amp; view == 0){
                            orderTU = "&lt;a href='#' id='publisDT' class='publisDT'&gt;发布时间 &lt;i class='glyphicon glyphicon-sort-by-attributes-alt'&gt;&lt;/i&gt;&lt;/a&gt;";
                        }else{
                            orderTU = "&lt;a href='#' id='publisDT' class='publisDT'&gt;发布时间&lt;/a&gt;";
                        }
                        if(sortFlag == 1 &amp;&amp; view == 2){
                            orderDU = "&lt;a href='#' id='createDT' class='createDT'&gt;上传日期 &lt;i class='glyphicon glyphicon-sort-by-attributes'&gt;&lt;/i&gt;&lt;/a&gt;";
                        }else if(sortFlag == 0 &amp;&amp; view == 2){
                            orderDU = "&lt;a href='#' id='createDT' class='createDT'&gt;上传日期 &lt;i class='glyphicon glyphicon-sort-by-attributes-alt'&gt;&lt;/i&gt;&lt;/a&gt;";
                        }else{
                            orderDU = "&lt;a href='#' id='createDT' class='createDT'&gt;上传日期&lt;/a&gt;";
                        }
                    }else{
                        orderTU = '发布时间';
                        orderDU = '上传日期';
                    }
                    var html = "&lt;ul id='noneHover'&gt;";
                        html += "&lt;li class='list-img frist-height'&gt;&lt;\/li&gt;\n";
                        html += "&lt;li class='list-title frist-height'&gt;标题&lt;\/li&gt;\n";
                        html += "&lt;li class='list-pinpai frist-height'&gt;品牌&lt;\/li&gt;\n";
                        html += "&lt;li class='list-guanggao frist-height'&gt;广告主&lt;\/li&gt;\n";
                        html += "&lt;li class='list-fenlei frist-height'&gt;作品标签&lt;\/li&gt;\n";
                        html += "&lt;li class='list-user frist-height'&gt;"+orderTU+"&lt;\/li&gt;\n";
                        html += "&lt;li class='frist-height' style='width:10%'&gt;"+orderDU+"&lt;\/li&gt;\n";
                        html += "&lt;/ul&gt;&lt;div class='clearfix'&gt;&lt;/div&gt;";
                    $('.ajax-newlist').append(html);
                    //发布时间排序
                    $('#publisDT,.publisDT').on('click',function(){
                        $('#view').val('0');
                        var sortnum = $('#publishsortFlag').val();
                        $('#creatsortFlag').val('1');
                        if(sortnum == 0){
                            $('#publishsortFlag').val('1');
                        }else{
                            $('#publishsortFlag').val('0');
                        }
                        clear_list();
                        ajaxpost(1);
                    });
                    //上传日期排序
                    $('#createDT,.createDT').on('click',function(){
                        $('#view').val('2');
                        var sortnum = $('#creatsortFlag').val();
                        $('#publishsortFlag').val('1');
                        if(sortnum == 0){
                            $('#creatsortFlag').val('1');
                        }else{
                            $('#creatsortFlag').val('0');
                        }
                        clear_list();
                        ajaxpost(1);
                    })
                }
                list_view(data);
                break;
                case '1' :
                list_img(data);
                break;
            }
            info_view(); // 查看作品 this id click
        }
    });
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:08:12
 * @description: 列表视图输出
 */
function list_view(data){
    // console.log(data);
    var user = getQueryString("myWorksFlag");  // 空为 不限 ，0 为 我的上传，1 为 我的收藏
    var keyword = getQueryString("inputKeyWord"); //关键字; 
    function checkLinshi(value,bool){
            var bool;
            if(value['m_advertiserId'] == 'a00001'){
                return bool?value['t_advertiserName'] || '未填写':value['t_brandName'] || '未填写';
            }else{
                return bool?value['m_advertiserName'] || '未填写':value['m_brandName'] || '未填写';
            }

    }
    if(data.status=='200'){
        switch(user){
            case '' :  //默认
            $.each(data['worksInfoList'],function(key,value){
                    //var img = 'http://7xpq9h.com1.z0.glb.clouddn.com/'+key+'.jpg-dentsu';
                    var img = value['t_worksImagePath'];
                    var strVar = "&lt;ul class='list-inline del"+value['t_worksId']+"' data-id="+value['t_worksId']+"&gt;";
                        strVar += "&lt;li class='list-img'&gt;";
                        strVar += " &lt;img src="+img+" title ="+value['t_worksName']+" class=\"img-responsive img-rounded detailview\" data-toggle=\"modal\" data-target=\"#show-id\"  data-id="+value['t_worksId']+"&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-title'&gt;";
                        strVar += " &lt;p class=\"detailview\" data-toggle=\"modal\" data-target=\"#show-id\"   data-id="+value['t_worksId']+"&gt;"+value['t_worksName'].replace(keyword,'&lt;b style="color:red"&gt;'+keyword+'&lt;/b&gt;')+"&lt;\/p&gt;";
                        strVar += "&lt;p class='text-muted'&gt;&lt;i class='glyphicon glyphicon-star'&gt;&lt;\/i&gt; "+value['collectionNum']+" &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-pinpai'&gt;";
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                        strVar += checkLinshi(value,false);
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-guanggao'&gt;"
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                        strVar += checkLinshi(value,true);
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-fenlei'&gt;"
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                        strVar += value['worksLabel']?value['worksLabel']:'&lt;i&gt;未填写&lt;/i&gt;';
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-date'&gt;";
                        strVar += value['t_publishDateStr']?dateSplic(value['t_publishDateStr'],0)+'年'+dateSplic(value['t_publishDateStr'],1)+'月':'未填写';
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-date'&gt;";
                        strVar += value['t_createTimeStr'];
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;div class=\"clearfix\"&gt;";
                        strVar += "&lt;\/div&gt;";
                        // start 修改按钮
                        strVar += " &lt;p class=\"text text-muted btn-post del"+value['t_worksId']+"\"&gt;";
                        if(value['editLimit'] == 1){
                            strVar += '&lt;span class="update btn-xs btn-primary btn" data-toggle=\"modal\" data-target=\"#user-update\" data-id='+value['t_worksId']+'&gt;&lt;i class="glyphicon glyphicon-edit"&gt;&lt;/i&gt; 编辑&lt;/span&gt;' 
                        };
                        if(value['deleteLimit'] == 1){
                            strVar += ' &lt;span class="del btn-xs btn-danger btn" data-id='+value['t_worksId']+'&gt;&lt;i class="glyphicon glyphicon-trash"&gt;&lt;/i&gt; 删除&lt;/span&gt;';
                        };
                        strVar += " &lt;\/p&gt;";
                        // end
                        strVar += '&lt;/ul&gt;';
                $('.ajax-newlist').append(strVar);
            });
            update_view();
            del_view();
            break;
            case '0': //我的上传
            $.each(data['worksInfoList'],function(key,value){
                    //var img = 'http://7xpq9h.com1.z0.glb.clouddn.com/'+key+'.jpg-dentsu';
                    $('.show-start').hide();
                    var img = value['t_worksImagePath'];
                    var strVar = "&lt;ul class=\"list-inline del"+value['t_worksId']+"\"  data-id="+value['t_worksId']+"&gt;";
                        strVar += "&lt;li class='list-img'&gt;";
                        strVar += " &lt;img src="+img+" title ="+value['t_worksName']+" class=\"img-responsive img-rounded detailview\" data-toggle=\"modal\" data-target=\"#show-id\"  data-id="+value['t_worksId']+"&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-title'&gt;";
                        strVar += " &lt;p class=\"detailview\" data-toggle=\"modal\" data-target=\"#show-id\"  data-id="+value['t_worksId']+"&gt;"+value['t_worksName'].replace(keyword,'&lt;b style="color:red"&gt;'+keyword+'&lt;/b&gt;')+"&lt;\/p&gt;";
                        strVar += "&lt;p class='text-muted'&gt;&lt;i class='glyphicon glyphicon-star'&gt;&lt;\/i&gt; "+value['collectionNum']+" &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-pinpai'&gt;";
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                         strVar += checkLinshi(value,false);
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-guanggao'&gt;"
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                        strVar += checkLinshi(value,true);
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-fenlei'&gt;"
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                        strVar += value['worksLabel']?value['worksLabel']:'&lt;i&gt;未填写&lt;/i&gt;';
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-date'&gt;";
                        strVar += value['t_publishDateStr']?dateSplic(value['t_publishDateStr'],0)+'年'+dateSplic(value['t_publishDateStr'],1)+'月':'未填写';
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-date'&gt;";
                        strVar += value['t_createTimeStr'];
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;div class=\"clearfix\"&gt;";
                        strVar += "&lt;\/div&gt;";
                        // start 修改按钮
                        strVar += " &lt;p class=\"text text-muted btn-post del"+value['t_worksId']+"\"&gt;";
                        if(value['editLimit'] == 1){
                            strVar += '&lt;span class="update btn-xs btn-primary btn" data-toggle=\"modal\" data-target=\"#user-update\" data-id='+value['t_worksId']+'&gt;&lt;i class="glyphicon glyphicon-edit"&gt;&lt;/i&gt; 编辑&lt;/span&gt;' 
                        };
                        if(value['deleteLimit'] == 1){
                            strVar += ' &lt;span class="del btn-xs btn-danger btn" data-id='+value['t_worksId']+'&gt;&lt;i class="glyphicon glyphicon-trash"&gt;&lt;/i&gt; 删除&lt;/span&gt;';
                        };
                        strVar += " &lt;\/p&gt;";
                        // end
                        strVar += '&lt;/ul&gt;';

                $('.ajax-newlist').append(strVar);
            });
            update_view();
            del_view();

            break;
            case '1':  //我的收藏
            $.each(data['worksInfoList'],function(key,value){
                    //var img = 'http://7xpq9h.com1.z0.glb.clouddn.com/'+key+'.jpg-dentsu';
                    $('.show-start').hide();
                    var img = value['t_worksImagePath'];
                    var strVar = "&lt;ul class=\"list-inline start"+value['t_worksId']+"\" data-id="+value['t_worksId']+"&gt;";
                        strVar += "&lt;li class='list-img'&gt;";
                        strVar += " &lt;img src="+img+" title ="+value['t_worksName']+" class=\"img-responsive img-rounded detailview\" data-toggle=\"modal\" data-target=\"#show-id\"  data-id="+value['t_worksId']+"&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-title'&gt;";
                        strVar += " &lt;p class=\"detailview\" data-toggle=\"modal\" data-target=\"#show-id\"  data-id="+value['t_worksId']+"&gt;"+value['t_worksName'].replace(keyword,'&lt;b style="color:red"&gt;'+keyword+'&lt;/b&gt;')+"&lt;\/p&gt;";
                        //strVar += "&lt;p class='text-muted'&gt;&lt;i class='glyphicon glyphicon-star'&gt;&lt;\/i&gt; 20 &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-pinpai'&gt;";
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                        strVar += checkLinshi(value,false);
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-guanggao'&gt;"
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                        strVar += checkLinshi(value,true);
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-fenlei'&gt;"
                        strVar += " &lt;p class=\"text-muted\"&gt;";
                        strVar += value['worksLabel']?value['worksLabel']:'&lt;i&gt;未填写&lt;/i&gt;';
                        strVar += " &lt;\/p&gt;";
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-date'&gt;";
                        strVar += value['t_publishDateStr']?dateSplic(value['t_publishDateStr'],0)+'年'+dateSplic(value['t_publishDateStr'],1)+'月':'未填写';
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;li class='list-date'&gt;";
                        strVar += value['t_createTimeStr'];
                        strVar += "&lt;\/li&gt;";
                        strVar += "&lt;div class=\"clearfix\"&gt;";
                        strVar += "&lt;\/div&gt;";
                        strVar += " &lt;p class=\"text-muted style='width:26%;position:absolute;top:45px;left:8%;' start"+value['t_worksId']+"\"&gt;";
                        strVar += '&lt;span class="start btn-xs btn-post btn-danger btn" data-id='+value['t_worksId']+'&gt;取消收藏&lt;/span&gt;';
                        strVar += " &lt;\/p&gt;";
                        strVar += '&lt;/ul&gt;';
                $('.ajax-newlist').append(strVar);
            });
            //取消收藏   未完成待修改
            $('.start').click(function(){
                var id = $(this).attr('data-id');
                //询问框
                layer.confirm('确定取消收藏？', {
                  btn: ['确定','取消'] //按钮
                }, function(){
                    $.ajax({
                        url:'../collectWorksInfo.do',
                        dataType:'json',
                        type:'post',
                        data:{worksId:id,collectionFlag:1},
                        success:function(data){
                            //进行相应操作之后 执行下面
                            $('.start'+id).fadeOut('300');
                            layer.msg('取消成功', {icon: 1});
                        }
                    })
                });
            })
            break;
        }
        //判断数据是所有时，加载更多按钮隐藏
        var numLength = data['worksInfoList'].length;
        if(numloadCount &gt; numLength){
            $('.loading_list').hide();
            //layer.msg('已全部加载完成', {icon: 1});
        }else{
            loading_page();
        }

    }else{
        $('.loading_list').hide();
        stop = false;
        layer.msg('已全部加载完成', {icon: 1});
    }
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:08:41
 * @description: 缩略图视图列表输出
 */
function list_img(data){
    var user = getQueryString("myWorksFlag");  // 空为 不限 ，0 为 我的上传，1 为 我的收藏 
    var keyword = getQueryString("inputKeyWord"); //关键字; 
    if(data.status == '200'){
        switch(user){
            case '':
            $.each(data['worksInfoList'],function(key,value){
                //var img = 'http://7xpq9h.com1.z0.glb.clouddn.com/'+key+'.jpg-dentsu';
                var img = value['t_worksImagePath'];
                var strVar = "";
                    strVar += "&lt;div class=\"col-xs-3 del"+value['t_worksId']+" \"&gt;";
                    strVar += " &lt;div class=\"thumbnail\"&gt;";
                    //strVar += "       &lt;img src="+value['thumbnail']+" title ="+value['t_worksName']+" class='img-responsive'&gt;";
                    strVar += "     &lt;img src="+img+" title ="+value['t_worksName']+" class='img-responsive'&gt;";
                    strVar += "     &lt;div class=\"caption thumbnail-title detailview\" data-toggle=\"modal\" data-id="+value['t_worksId']+" data-target=\"#show-id\"&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar +=           value['t_worksName'].replace(keyword,'&lt;b style="color:red"&gt;'+keyword+'&lt;/b&gt;');
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                   // strVar += "               &lt;i class=\"glyphicon glyphicon-user\"&gt;&lt;\/i&gt; "+value['t_worksCreater'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar += "             &lt;i class=\"glyphicon glyphicon-time\"&gt;&lt;\/i&gt; "+value['t_createTimeStr'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar += "             &lt;i class=\"glyphicon glyphicon-star\"&gt;&lt;\/i&gt; "+value['collectionNum'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "     &lt;\/div&gt;";
                    strVar += " &lt;\/div&gt;";
                    // start  编辑按钮
                    if(value['editLimit'] == 1 || value['deleteLimit'] == 1){
                        strVar += "         &lt;p class=\"text text-center img-button \"&gt;";
                    }
                    if(value['editLimit'] == 1){
                        strVar += '&lt;span class="btn-primary btn update" data-toggle="modal" data-target="#user-update" data-id='+value['t_worksId']+'&gt;编辑&lt;/span&gt;';
                    };
                    if(value['deleteLimit'] == 1){
                        strVar += ' &lt;span class="btn-danger btn del" data-id='+value['t_worksId']+' &gt;删除&lt;/span&gt;';
                    }
                    if(value['editLimit'] == 1 || value['deleteLimit'] == 1){
                        strVar += "&lt;\/p&gt;";
                    }
                    // end
                    strVar += "&lt;\/div&gt;";
                $('.ajax-hotlist').append(strVar);
            });
            update_view();
            del_view();
            break;
            case '0':
            $.each(data['worksInfoList'],function(key,value){
                //var img = 'http://7xpq9h.com1.z0.glb.clouddn.com/'+key+'.jpg-dentsu';
                var img = value['t_worksImagePath'];
                var strVar = "";
                    strVar += "&lt;div class=\"col-xs-3 del"+value['t_worksId']+" \"&gt;";
                    strVar += " &lt;div class=\"thumbnail\"&gt;";
                    //strVar += "       &lt;img src="+value['thumbnail']+" title ="+value['t_worksName']+"&gt;";
                    strVar += "     &lt;img src="+img+" title ="+value['t_worksName']+"&gt;";
                    strVar += "     &lt;div class=\"caption thumbnail-title detailview\" data-toggle=\"modal\" data-id="+value['t_worksId']+" data-target=\"#show-id\"&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar +=           value['t_worksName'].replace(keyword,'&lt;b style="color:red"&gt;'+keyword+'&lt;/b&gt;');
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    //strVar += "               &lt;i class=\"glyphicon glyphicon-user\"&gt;&lt;\/i&gt; "+value['t_worksCreater'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar += "             &lt;i class=\"glyphicon glyphicon-time\"&gt;&lt;\/i&gt; "+value['t_createTimeStr'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar += "             &lt;i class=\"glyphicon glyphicon-star\"&gt;&lt;\/i&gt; "+value['collectionNum'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "     &lt;\/div&gt;";
                    strVar += " &lt;\/div&gt;";
                    // start  编辑按钮
                    if(value['editLimit'] == 1 || value['deleteLimit'] == 1){
                        strVar += "         &lt;p class=\"text text-center img-button \"&gt;";
                    }
                    if(value['editLimit'] == 1){
                        strVar += '&lt;span class="btn-primary btn update" data-toggle="modal" data-target="#user-update" data-id='+value['t_worksId']+'&gt;编辑&lt;/span&gt;';
                    };
                    if(value['deleteLimit'] == 1){
                        strVar += ' &lt;span class="btn-danger btn del" data-id='+value['t_worksId']+' &gt;删除&lt;/span&gt;';
                    }
                    if(value['editLimit'] == 1 || value['deleteLimit'] == 1){
                        strVar += "&lt;\/p&gt;";
                    }
                    // end
                    strVar += "&lt;\/div&gt;";
                $('.ajax-hotlist').append(strVar);
            })
            update_view();
            del_view();
            break;
            case '1':
            $.each(data['worksInfoList'],function(key,value){
                var img = value['t_worksImagePath'];
                var strVar = "";
                    strVar += "&lt;div class=\"col-xs-3 start-"+value['t_worksId']+" \"&gt;";
                    strVar += " &lt;div class=\"thumbnail\"&gt;";
                   // strVar += "       &lt;img src="+value['thumbnail']+" title ="+value['t_worksName']+"&gt;";
                    strVar += "     &lt;img src="+img+" title ="+value['t_worksName']+"&gt;";
                    strVar += "     &lt;div class=\"caption thumbnail-title detailview\" data-toggle=\"modal\" data-id="+value['t_worksId']+" data-target=\"#show-id\"&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar +=           value['t_worksName'].replace(keyword,'&lt;b style="color:red"&gt;'+keyword+'&lt;/b&gt;');
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                   //strVar += "                &lt;i class=\"glyphicon glyphicon-user\"&gt;&lt;\/i&gt; "+value['t_worksCreater'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar += "             &lt;i class=\"glyphicon glyphicon-time\"&gt;&lt;\/i&gt; "+value['t_createTimeStr'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "         &lt;p class=\"text text-center\"&gt;";
                    strVar += "             &lt;i class=\"glyphicon glyphicon-star\"&gt;&lt;\/i&gt; "+value['collectionNum'];
                    strVar += "         &lt;\/p&gt;";
                    strVar += "     &lt;\/div&gt;";
                    strVar += " &lt;\/div&gt;";
                    strVar += "         &lt;p class=\"text text-center img-button \"&gt;";
                    strVar += ' &lt;span class="btn-danger btn start-event" start='+value['t_worksId']+' &gt;取消收藏&lt;/span&gt;';
                    strVar += "         &lt;\/p&gt;";
                    strVar += "&lt;\/div&gt;";
                $('.ajax-hotlist').append(strVar);
            })

            //取消收藏  待补充
            $('.start-event').click(function(){
                //alert('352 待开发补充');
                var id = $(this).attr('start');
                //询问框
                layer.confirm('确定取消收藏？', {
                  btn: ['确定','取消'] //按钮
                }, function(){
                    $.ajax({
                        url:'../collectWorksInfo.do',
                        dataType:'json',
                        type:'post',
                        data:{worksId:id,collectionFlag:1},
                        success:function(data){
                            //进行相应操作之后 执行下面
                            $('.start'+id).fadeOut('300');
                            layer.msg('取消成功', {icon: 1});
                        }
                    })
                });
            })
            break;
        }

        //判断数据是所有时，加载更多按钮隐藏
        var numLength = data['worksInfoList'].length;
        if(numloadCount &gt; numLength){
            $('.loading_list').hide();
        }else{
            loading_page();
        }
    }else{
        $('.loading_list').hide();
        stop = false;
        layer.msg('已全部加载完成', {icon: 1});
    }
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:08:57
 * @description: 查看作品详情页
 */
function info_view(){
    $('.detailview').click(function(){
        var ty = $(this).hasClass('img-rounded');
        if(ty){
            $(this).parent().next().find('.detailview').css('color','#989898'); //已访问样式
        }else{
            $(this).css('color','#989898'); //已访问样式
        }
        var id = $(this).attr('data-id');  //注意在列表加上data-id属性
        $('.show-start').attr('data-id',id); //克隆收藏控件

        //作品描述 用对应的id 加载
        $.ajax('../selectWorksInfoById.do',{
            type:'post',
            dataType:'json',
            data:{worksId:id},
            success:function(data){
                var workinfo = data['worksInfo'];
                //console.log(workinfo);
                var chuangzuohtml = '&lt;table class="pos"&gt;&lt;tbody&gt;';  //创作团队
                var gongsihtml = '&lt;table class="pos"&gt;&lt;tbody&gt;'; //公司制作
                var reg = new RegExp("[,，|\r\n]","g");//g,表示全部替换。
                $('.gongsi-dt').addClass('hide');  //制作公司 默认隐藏
                $.each(workinfo['tWorksCreatorInfoList'],function(key,value){
                    if(value['m_positionType'] == 1 || value['m_positionType'] == 3){
                        var workslist = value['t_worksCreator'].replace(reg,'/');
                        var worksarr = workslistfor (var i = 0; i &lt; Things.length; i++) {
                            Things[i]
                        }.split('/');
                        $.each(worksarr,function(k,v){
                            console.log(v);
                        })
                        chuangzuohtml += '&lt;tr&gt;&lt;td&gt;'+value['m_positionName']+'&lt;/td&gt;&lt;td&gt;'+value['t_worksCreator'].replace(reg,' / ')+'&lt;/td&gt;&lt;/tr&gt;';
                        console.log(chuangzuohtml);
                    }
                    if(value['m_positionType'] == 2){
                        gongsihtml += '&lt;tr&gt;&lt;td&gt;'+value['m_positionName']+'&lt;/td&gt;&lt;td&gt;'+value['t_worksCreator'].replace(/CO\s*.\s*,\s*LTD/ig,';').replace(reg,'&lt;br/&gt;').replace(/;/g,'CO., LTD')+'&lt;/td&gt;&lt;/tr&gt;';
                        $('.gongsi-dt').removeClass('hide');
                    }
                });
                    chuangzuohtml += '&lt;/tbody&gt;&lt;/table&gt;';
                    gongsihtml += '&lt;/tbody&gt;&lt;/table&gt;';
                    $('#chuangzuo-list').empty().append(chuangzuohtml);
                    $('#gongsi-list').empty().append(gongsihtml);

                $('.worksinfo .workname').html(workinfo['t_worksName']); //作品名称
                $('.worksinfo .deparname').html(workinfo['m_departmentName']?workinfo['m_departmentName']:'&lt;i&gt;未填写&lt;/i&gt;'); //所属部门

                if(workinfo['m_advertiserId'] == 'a00001'){
                    $('.worksinfo .advername').html(workinfo['t_advertiserName']?workinfo['t_advertiserName']:'&lt;i&gt;未填写&lt;/i&gt;'); //广告主临时 自定义
                    $('.worksinfo .branname').html(workinfo['t_brandName']?workinfo['t_brandName']:'&lt;i&gt;未填写&lt;/i&gt;'); //品牌临时 自定义
                }else{
                    $('.worksinfo .advername').html(workinfo['m_advertiserName']?workinfo['m_advertiserName']:'&lt;i&gt;未填写&lt;/i&gt;'); //广告主
                    $('.worksinfo .branname').html(workinfo['m_brandName']?workinfo['m_brandName']:'&lt;i&gt;未填写&lt;/i&gt;'); //品牌
                }
                $('.worksinfo .labels').html(workinfo['worksLabel']?workinfo['worksLabel']:'&lt;i&gt;未填写&lt;/i&gt;');  //作品标签
                var reCreater = workinfo['m_userName'];
                $('.worksinfo .uploadname').html(reCreater); //上传者
                var reDesp = workinfo['t_worksDesp'].replace(/\r\n/g,"&lt;br&gt;");
                $('.worksinfo .wkdesp').html(reDesp?reDesp:'&lt;i&gt;未填写&lt;/i&gt;'); // 作品简介
                $('.worksinfo .publishDate').html(workinfo['t_publishDateStr']?dateSplic(workinfo['t_publishDateStr'],'')+'年'+dateSplic(workinfo['t_publishDateStr'],1)+'月':'&lt;i&gt;未填写&lt;/i&gt;'); //出街日期
                $('.worksinfo .createrTime').html(workinfo['t_createTimeStr']?workinfo['t_createTimeStr']:'&lt;i&gt;未填写&lt;/i&gt;'); //发表时间
                $('.emptys').empty(); 
                if(workinfo['tWorksAwardInfoList'].length !== 0){
                    var ad_html = '&lt;dt class="emptys"&gt;获奖信息:&lt;/dt&gt;&lt;dd class="emptys"&gt;';
                    $.each(workinfo['tWorksAwardInfoList'],function(k,v){
                        ad_html += v['m_adFestName']+' '+v['m_adFestYearName']+'年 '+v['m_adFestAwardName']+'&lt;br/&gt;';
                    });
                    ad_html += '&lt;/dd&gt;';
                    $('.worksinfo .createrTime').after(ad_html);
                }
                //轮播加载 -----start------
                var slideList = workinfo['tWorksPathInfoList'];
                $.each(slideList,function(k,v){
                    //console.log(v);
                    if(v['t_worksType'] == 1){  
                        var file_type = v['t_fileType'].toLocaleLowerCase();
                        var html = gallery(file_type,v);
                        $('#gallery').append(html);
                        //console.log(html);
                        // if(file_type == 'mp4'){
                        //  $('#gallery').prepend(html);
                        // }else if(file_type == 'mp3'){
                        //  var op = $('#gallery .oder_mp4').hasClass("oder_mp4");
                        //  if(op){
                        //      $('#gallery .oder_mp4:last').after(html);
                        //  }else{
                        //      $('#gallery').prepend(html);
                        //  }
                        // }else{
                        //  var imgtype = $('#gallery .oder_word').hasClass("oder_word");
                        //  if(imgtype){
                        //      $('#gallery .oder_word:first').before(html);
                        //  }else{
                        //      $('#gallery').append(html);
                        //  }
                        // }
                    }
                });
                var api;
                api = $("#gallery").unitegallery({
                    //code
                });
                api.getItem(0);
                api.on("item_change",function(num, data){       //on item change, get item number and item data
                    //console.log(data);
                    $('.titlelink').remove(); //字幕标题
                    if(data['type'] =='html5video'){
                        $('.ug-zoompanel').hide();
                    }else if(data['html']){
                        $('.ug-zoompanel').hide();
                        $('.ug-item-wrapper').after('&lt;a class="titlelink" href="'+data['thumb']+'" target="_blank"&gt;'+data['title']+'&lt;/a&gt;');
                    }else{
                        $('.ug-zoompanel').show();
                        if(data['title'] == 'pdf' || data['title'] == 'doc' || data['title'] == 'docx' || data['title'] == 'ppt' || data['title'] == 'pptx' || data['title'] == 'xls' || data['title'] == 'xlsx' || data['title'] == 'csv'){
                            if(data['thumb'] == ''){
                                $('.ug-zoompanel').hide(); //转码未完成，隐藏左侧控制按钮
                                $('.ug-item-wrapper').after('&lt;div class="titlelink buttonClick"&gt;&lt;/div&gt;');
                                $('.buttonClick').on('click',function(){
                                    layer.msg('正在转码中，请稍候！');
                                })
                            }else{
                                var swfUrl = './preview.html?name='+data['pathid']; //预览文档
                                $('.glyphicon-eye-open').attr('data-src',swfUrl);
                                $('.ug-item-wrapper').after('&lt;a class="titlelink" href="'+swfUrl+'" target="_blank"&gt;&lt;/a&gt;');
                            }
                        }else{
                            var src = './imageview.html?url='+encodeURI(data['thumb']);
                            $('.glyphicon-eye-open').attr('data-src',src); //查看原图url
                            $('.ug-item-wrapper').after('&lt;a class="titlelink" href="'+src+'" target="_blank"&gt;&lt;/a&gt;');
                        }
                    }
                });


                $('#show-id').on('hidden.bs.modal', function (e) {
                    $('#gallery').html('').hide();  //关闭之后 清空视频和音频，防止恶意加载流量
                });

                //轮播加载 ------end-------
                if(workinfo['collectionFlag'] == 1 ){
                    $('.show-start').removeClass('btn-default').addClass('btn-primary').text('取消收藏');
                }else{
                    $('.show-start').addClass('btn-default').removeClass('btn-primary').text('我要收藏');
                }
            }
        })
    });

    //业务团队内部人员标签增加跳转链接
    function tagLink(tag){
        window.open('search.html?inputKeyWord='+tag+'&amp;myWorksFlag=');
    }
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:09:27
 * @description: 出街日期格式化
 */
function dateSplic(data,key){
    if(data !==''){
        var text = data.split('-');
        if(key == ''){
            return text['0'];
        }else{
            return text[key];
        }
    }else{
        return ' 未知'
    }
}

//收藏触发按钮
$('.show-start').click(function(){
    var id = $(this).attr('data-id');  //注意在列表加上data-id属性
    var class_btn = $(this).hasClass('btn-default');
    if(class_btn){
        $.ajax({
            url:'../collectWorksInfo.do',
            dataType:'json',
            type:'post',
            data:{worksId:id,collectionFlag:0},
            success:function(data){
                layer.msg('收藏成功', {icon: 1});
                $('.show-start').removeClass('btn-default').addClass('btn-primary').text('取消收藏');
            }
        })
    }else{
        $.ajax({
            url:'../collectWorksInfo.do',
            dataType:'json',
            type:'post',
            data:{worksId:id,collectionFlag:1},
            success:function(data){
                layer.msg('取消收藏成功', {icon: 1});
                $('.show-start').addClass('btn-default').removeClass('btn-primary').text('我要收藏');
            }
        })
    }
});

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:10:22
 * @description: 轮播 幻灯片
 */
function gallery(type,dataFile){
    //console.log(dataFile);
    switch(type){
        case 'mp4':
            var imgs = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:"../view/assets/img/play_bg.jpg";
            var play = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:"../view/assets/img/play.jpg";
            var html = '&lt;img title ="" src="'+play+'" class="oder_mp4"  data-type="html5video"  data-image="'+imgs+'"    data-videomp4="'+dataFile['t_worksPath']+'"  data-description=""&gt;';
            return html;
            break;
        case 'mp3':
            var html = '&lt;img title ="" src="../view/assets/img/music.jpg" class="oder_mp3"  data-type="html5video"  data-image="../view/assets/img/music.jpg"    data-videomp4="'+dataFile['t_worksPath']+'"  data-description=""&gt;';
            return html;
            break;
        case 'jpg':
            var html = '&lt;img class="oder_img"  src="'+dataFile['t_thumbnailPath']+'" data-image="'+dataFile['t_thumbnailPath']+'" data-title="" data-thumb="'+dataFile['t_worksPath']+'" data-description="图片类型"&gt;';
            return html;
        case 'png':
            var html = '&lt;img class="oder_img"  src="'+dataFile['t_thumbnailPath']+'" data-image="'+dataFile['t_thumbnailPath']+'" data-title="" data-thumb="'+dataFile['t_worksPath']+'" data-description="图片类型"&gt;';
            return html;
        case 'jpeg':
            var html = '&lt;img class="oder_img"  src="'+dataFile['t_thumbnailPath']+'" data-image="'+dataFile['t_thumbnailPath']+'" data-title="" data-thumb="'+dataFile['t_worksPath']+'" data-description="图片类型"&gt;';
            return html;
        case 'gif':
            var html = '&lt;img class="oder_img"  src="'+dataFile['t_thumbnailPath']+'" data-image="'+dataFile['t_thumbnailPath']+'" data-title="" data-thumb="'+dataFile['t_worksPath']+'" data-description="图片类型"&gt;';
            return html;
        case 'doc':
            var imgs = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:'../view/assets/img/zhuanma_bg.jpg';
            var html = '&lt;img class="oder_word"  src="'+imgs+'" data-image="'+imgs+'" data-title="'+dataFile['t_fileType']+'"  data-description="文档类型"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
            return html;
        case 'docx':
            var imgs = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:'../view/assets/img/zhuanma_bg.jpg';
            var html = '&lt;img class="oder_word"  src="'+imgs+'" data-image="'+imgs+'" data-title="'+dataFile['t_fileType']+'"  data-description="文档类型"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
            return html;
        case 'xls':
            var imgs = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:'../view/assets/img/zhuanma_bg.jpg';
            var html = '&lt;img class="oder_word"  src="'+imgs+'" data-image="'+imgs+'" data-title="'+dataFile['t_fileType']+'"  data-description="文档类型"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
            return html;
        case 'xlsx':
            var imgs = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:'../view/assets/img/zhuanma_bg.jpg';
            var html = '&lt;img class="oder_word"  src="'+imgs+'" data-image="'+imgs+'" data-title="'+dataFile['t_fileType']+'"  data-description="文档类型"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
            return html;
        case 'ppt':
            var imgs = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:'../view/assets/img/zhuanma_bg.jpg';
            var html = '&lt;img class="oder_word"  src="'+imgs+'" data-image="'+imgs+'" data-title="'+dataFile['t_fileType']+'"  data-description="文档类型"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
            return html;
        case 'pptx':
            var imgs = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:'../view/assets/img/zhuanma_bg.jpg';
            var html = '&lt;img class="oder_word"  src="'+imgs+'" data-image="'+imgs+'" data-title="'+dataFile['t_fileType']+'"  data-description="文档类型"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
            return html;
        case 'pdf':
            var imgs = dataFile['t_thumbnailPath']?dataFile['t_thumbnailPath']:'../view/assets/img/zhuanma_bg.jpg';
            var html = '&lt;img class="oder_word"  src="'+imgs+'" data-image="'+imgs+'" data-title="'+dataFile['t_fileType']+'"  data-description="文档类型"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
            return html;
        case 'html':
            var imgs = '../view/assets/img/html5.jpg';
            var html = '&lt;img class="oder_html" data-html="1" src="'+imgs+'" data-image="'+imgs+'" data-title="'+dataFile['t_fileName']+'"  data-description="文档类型"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
            return html;
        default:
            //默认
            var html = '&lt;img class="oder_img"  src="'+dataFile['t_thumbnailPath']+'" data-image="'+dataFile['t_thumbnailPath']+'" data-title="" data-thumb="'+dataFile['t_worksPath']+'" data-description="'+dataFile['t_worksPath']+'"&gt;';
            return html;
    }


    // if(dataFile['t_thumbnailPath'] == ''){
    //  if(type == 'mp4'){
    //      var html_mp4 = '&lt;img title ="" src="../view/assets/img/play.jpg" class="oder_mp4"  data-type="html5video"  data-image="../view/assets/img/play_bg.jpg"    data-videomp4="'+dataFile['t_worksPath']+'"  data-description=""&gt;';
    //      return html_mp4;
    //  }else if(type == 'mp3'){
    //      var html_mp3 = '&lt;img title ="" src="../view/assets/img/music.jpg" class="oder_mp3"  data-type="html5video"  data-image="../view/assets/img/music.jpg"    data-videomp4="'+dataFile['t_worksPath']+'"  data-description=""&gt;';
    //      return html_mp3

    //  }else{
    //      if(type == 'jpg' || type == 'png' || type == 'gif' || type == 'jpeg'){
    //          var html = '&lt;img title ="" class="oder_img"  src="../view/assets/img/zhuanma_bg.jpg" data-image="../view/assets/img/zhuanma_bg.jpg" data-thumb="" data-description=""&gt;';
    //          return html;
    //      }else{
    //          var html = '&lt;img title ="" class="oder_word"  src="../view/assets/img/zhuanma_bg.jpg" data-image="../view/assets/img/zhuanma_bg.jpg" data-thumb="" data-description=""&gt;';
    //          return html;
    //      }

    //  }
    // }else{
    //  if(type == 'mp4'){
    //      //var html_mp4 = '&lt;img title ="" src="'+dataFile['t_thumbnailPath']+'" class="oder_mp4"  data-type="html5video"  data-image="'+dataFile['t_thumbnailPath']+'"    data-videomp4="'+dataFile['t_worksPath']+'"  data-description=""&gt;';
    //      //return html_mp4;
    //  }else if(type == 'mp3'){
    //      var html_mp3 = '&lt;img title ="" src="../view/assets/img/music.jpg" class="oder_mp3"  data-type="html5video"  data-image="../view/assets/img/music.jpg"    data-videomp4="'+dataFile['t_worksPath']+'"  data-description=""&gt;';
    //      return html_mp3

    //  }else{
    //      if(type == 'jpg' || type == 'png' || type == 'gif' || type == 'jpeg'){
    //          var html = '&lt;img class="oder_img"  src="'+dataFile['t_thumbnailPath']+'" data-image="'+dataFile['t_thumbnailPath']+'" data-link="caonima" data-title="图片。。。。。。" data-thumb="'+dataFile['t_worksPath']+'" data-description="fuck"&gt;';
    //          return html;
    //      }else{
    //          var html = '&lt;img class="oder_word"  src="'+dataFile['t_thumbnailPath']+'" data-image="'+dataFile['t_thumbnailPath']+'" data-title="'+dataFile['t_fileType']+'"  data-description="fuckaaaa"  data-pathid="'+dataFile['t_worksPathId']+'" data-thumb="'+dataFile['t_worksPath']+'"&gt;';
    //          return html;
    //      }
    //  }
    // }

}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:10:45
 * @description: 编辑作品页面展示
 */
workLink(); //H5 作品链接方法调用
function update_view(){
    //修改
    $('.update').click(function(){
        var id = $(this).attr('data-id');
        $('#works_id').val(id);
        $('#advertiser,#brandsInfo').empty(); //初始化广告主 初始化品牌
        $('#advertiser,#brandsInfo').selectpicker('refresh');
        $('.loadingtext').hide(); 
        $('#filelist').show(); //资源作品展示
        $('.btn-dis').removeAttr('disabled'); //开启提交状态
        $('.imgUpList').empty(); //初始化 图片预览清空
        $.ajax('../selectWorksInfoById.do',{
            type:'post',
            cache:false,
            dataType:'json',
            data:{worksId:id},
            success:function(data){
                var vinfo = data['worksInfo'];
                $('#user-update #up_worksName').val(vinfo['t_worksName']); //作品名称
                $('#publishDateYear').val(dateSplic(vinfo['t_publishDateStr'],0));
                $('#publishDateMoth').val(dateSplic(vinfo['t_publishDateStr'],1));
                $('#publishDateYear,#publishDateMoth').selectpicker('refresh');
                $('#user-update #worksDesp').val(vinfo['t_worksDesp']);  //作品简介

                $('#awardId').empty().append('&lt;option value ='+vinfo['m_awardId']+'&gt;'+vinfo['m_awardName']+'&lt;/option&gt;');
                $.ajax({
                    url:'../initUploadSelectList.do',
                    type:'post',
                    dataType:'json',
                    success:function(awdata){
                        //创作团队 内部
                        var pos="";
                        //制作公司 外部
                        var bos="";
                        $.each(awdata['creatorPositionList'],function(key,value){
                            if(value['m_positionType'] == 1 || value['m_positionType'] == 3){
                                    pos += "&lt;div class=\"form-inline\"&gt;";
                                    pos += "    &lt;div class=\"form-group\"&gt;";
                                    pos += "        &lt;label class=\"lab\" &gt;&lt;\/label&gt;";
                                    pos += "        &lt;input type=\"text\" class=\"form-control\" name="+value['m_positionId']+"  placeholder=\"请输入"+value['m_positionName']+"姓名\"&gt; &lt;strong&gt;"+value['m_positionName']+"&lt;\/strong&gt;";
                                    pos += "    &lt;\/div&gt;";
                                    pos += "&lt;\/div&gt;";
                            }
                            if(value['m_positionType'] == 2){
                                bos += "&lt;div class=\"form-inline\"&gt;";
                                bos += "    &lt;div class=\"form-group\"&gt;";
                                bos += "        &lt;label class=\"lab\" style=\"vertical-align:top\"&gt;&lt;\/label&gt;";
                                bos += "        &lt;textarea class=\"form-control\" rows=\"5\" style=\"width:50%;\"  placeholder=\"请输入公司名称\" name="+value['m_positionId']+"&gt;&lt;\/textarea&gt;";
                                bos += "        &lt;strong style=\"vertical-align:top\"&gt; "+value['m_positionName']+"&lt;\/strong&gt;";
                                bos += "    &lt;\/div&gt;";
                                bos += "&lt;\/div&gt;";
                            }
                        });

                        $('#chuangzuo-ajax').empty().append(pos);
                        $('#chuangzuo-ajax .form-inline').eq(0).find('label').append('&lt;b&gt;*&lt;/b&gt; 公司内 业务团队');
                        $('#gongsi-ajax').empty().append(bos);
                        $('#gongsi-ajax .form-inline').eq(0).find('label').append('公司外 制作公司');
                        //赋值
                        $.each(vinfo['tWorksCreatorInfoList'],function(key,value){
                                $("[name="+value['m_positionId']+"]").val(value['t_worksCreator']);

                        });

                        // 表单全部trim
                        $('#up_worksName,#chuangzuo-ajax input,#gongsi-ajax textarea,#worksDesp').blur(function(){
                            var txt = $(this).val().trim();
                            $(this).val(txt);
                        });

                        $('.adList').empty();
                        $.each(vinfo['tWorksAwardInfoList'],function(k,v){
                            var adhtmls = '&lt;li class="'+v['m_adFestId']+' ad_id_list"&gt;&lt;ul class="list-inline adcheck"&gt;' 
                                        adhtmls += '&lt;li data-id="'+v['m_adFestId']+'"&gt;'+v['m_adFestName']+'&lt;/li&gt;';
                                        adhtmls += '&lt;li data-id="'+v['m_adFestYearId']+'"&gt;'+v['m_adFestYearName']+'&lt;/li&gt;';
                                        adhtmls += '&lt;li data-id="'+v['m_adFestAwardId']+'"&gt;'+v['m_adFestAwardName']+'&lt;/li&gt;';
                                        adhtmls += '&lt;li data-id="'+v['m_adFestId']+'" class="adremove"&gt;&lt;span class="btn btn-xs btn-danger"&gt;&lt;i class="glyphicon glyphicon-remove"&gt;&lt;/i&gt;&lt;/span&gt;&lt;/li&gt;';
                                        adhtmls += '&lt;/li&gt;&lt;/ul&gt;';
                                    $('.adList').append(adhtmls);
                        });
                        //删除
                        $('.adremove').on('click',function(){
                            var ad_id = $(this).attr('data-id');
                            $('.'+ad_id).remove();
                        })
                        //广告节获奖
                        $('.addAd').click(function(){
                            var adhtml = "";
                                    adhtml += "&lt;div class=\"form-inline\"&gt;\n";
                                    adhtml += " &lt;div class=\"form-group\"&gt;\n";
                                    adhtml += "     &lt;label class=\"lab\"&gt;广告节&lt;\/label&gt;\n";
                                    adhtml += "     &lt;select class=\"form-control selectpicker\" data-live-search=\"true\" id=\"adFestId\" name=\"adFestId\"&gt;\n";
                                    adhtml += "         &lt;option value=\"\"&gt;请选择广告节&lt;\/option&gt;\n";                         
                                $.each(awdata['advertFestivalList'],function(key,value){
                                     adhtml += "&lt;option value="+value['m_adFestId']+"-"+value['m_adFestName'].replace(' ','+')+"&gt;"+value['m_adFestName']+"&lt;\/option&gt;\n";
                                })
                                adhtml += "     &lt;\/select&gt;\n";
                                adhtml += " &lt;\/div&gt;\n";
                                adhtml += "&lt;\/div&gt;\n";
                                adhtml += "&lt;div class=\"form-inline\"&gt;\n";
                                adhtml += " &lt;div class=\"form-group\"&gt;\n";
                                adhtml += "     &lt;label class=\"lab\"&gt;广告节年份&lt;\/label&gt;\n";
                                adhtml += "     &lt;select class=\"form-control selectpicker\" data-live-search=\"true\" id=\"adFestYearId\" name=\"adFestYearId\" &gt;\n";
                                adhtml += "         &lt;option value=\"\"&gt;请选择年份&lt;\/option&gt;\n";
                                adhtml += "     &lt;\/select&gt;\n";
                                adhtml += " &lt;\/div&gt;\n";
                                adhtml += "&lt;\/div&gt;\n";
                                adhtml += "&lt;div class=\"form-inline\"&gt;\n";
                                adhtml += " &lt;div class=\"form-group\"&gt;\n";
                                adhtml += "     &lt;label class=\"lab\"&gt;奖项名称&lt;\/label&gt;\n";
                                adhtml += "     &lt;select class=\"form-control selectpicker\" data-live-search=\"true\" id=\"adFestAwardId\" name=\"adFestAwardId\" &gt;\n";
                                adhtml += "         &lt;option value=\"\"&gt;请选择奖项名称&lt;\/option&gt;\n";
                                adhtml += "     &lt;\/select&gt;\n";
                                adhtml += " &lt;\/div&gt;\n";
                                adhtml += "&lt;\/div&gt;\n";
                                adhtml += "&lt;div class='text-center'&gt;&lt;span class='btn btn-default btn-xs adquxiao'&gt;取消&lt;/span&gt;&lt;span class='btn btn-primary btn-xs adqueding'&gt;确定&lt;/span&gt;&lt;/div&gt;"
                                $('#adFestId-show').empty().append(adhtml);
                                $('#adFestId,#adFestYearId,#adFestAwardId').selectpicker('refresh'); //刷新

                                //广告节触发事件
                                $('#adFestId').on('changed.bs.select',function(){
                                    var m_adFestId = $(this).val().split("-",1).toString(); //分割并转字符串类型
                                    if(m_adFestId !== ''){
                                        $.ajax({
                                            url:'../selectAdvertFestivalYearAward.do',
                                            dataType:'json',
                                            type:'post',
                                            data:{adFestId:m_adFestId},
                                            success:function(advdata){
                                                if(advdata['status'] == 200){
                                                    //广告年份激活
                                                    var yearhtml = '';
                                                    $.each(advdata['advertFestivalYearList'],function(key,value){
                                                        yearhtml += '&lt;option value="'+value['m_adFestYearId']+'-'+value['m_adFestYearName'].replace(' ','+')+'"&gt;'+value['m_adFestYearName']+'&lt;/option&gt;';
                                                    });
                                                    $('#adFestYearId').empty().append(yearhtml);

                                                    //广告奖项激活
                                                    var awardhtml = '';
                                                    $.each(advdata['advertFestivalAwardList'],function(key,value){
                                                        awardhtml += '&lt;option value="'+value['m_adFestAwardId']+'-'+value['m_adFestAwardName'].replace(' ','+')+'"&gt;'+value['m_adFestAwardName']+'&lt;/option&gt;';
                                                    });
                                                    $('#adFestAwardId').empty().append(awardhtml);
                                                }else{
                                                    $('#adFestYearId').empty().append('&lt;option value=""&gt;没有对应的数据&lt;/option&gt;');
                                                    $('#adFestAwardId').empty().append('&lt;option value=""&gt;没有对应的数据&lt;/option&gt;');
                                                }
                                                $('#adFestId,#adFestYearId,#adFestAwardId').selectpicker('refresh'); //刷新
                                            }
                                        })
                                    }else{
                                        $('#adFestYearId').empty().append('&lt;option value=""&gt;请选择年份&lt;/option&gt;');
                                        $('#adFestAwardId').empty().append('&lt;option value=""&gt;请选择奖项名称&lt;/option&gt;');
                                    }
                                    $('#adFestId,#adFestYearId,#adFestAwardId').selectpicker('refresh'); //刷新
                                });

                                //广告节按钮 取消 确定
                                $('.adquxiao').on('click',function(){
                                    $('#adFestId-show').empty();
                                });
                                $('.adqueding').on('click',function(){
                                    var adFestId = $('#adFestId').val();
                                    if(adFestId == ''){
                                        $('#error').show().text('请选择广告节');
                                        return false;
                                    }
                                    var adFestYearId = $('#adFestYearId').val();
                                    var adFestAwardId = $('#adFestAwardId').val();
                                    var adhtmls = '&lt;li class="'+splits(adFestId,0)+' ad_id_list"&gt;&lt;ul class="list-inline adcheck"&gt;' 
                                        adhtmls += '&lt;li data-id="'+splits(adFestId,0)+'"&gt;'+splits(adFestId,1)+'&lt;/li&gt;';
                                        adhtmls += '&lt;li data-id="'+splits(adFestYearId,0)+'"&gt;'+splits(adFestYearId,1)+'&lt;/li&gt;';
                                        adhtmls += '&lt;li data-id="'+splits(adFestAwardId,0)+'"&gt;'+splits(adFestAwardId,1)+'&lt;/li&gt;';
                                        adhtmls += '&lt;li data-id="'+splits(adFestId,0)+'" class="adremove"&gt;&lt;span class="btn btn-xs btn-danger"&gt;&lt;i class="glyphicon glyphicon-remove"&gt;&lt;/i&gt; 删除&lt;/span&gt;&lt;/li&gt;';
                                        adhtmls += '&lt;/li&gt;&lt;/ul&gt;';
                                    $('.adList').append(adhtmls);
                                    $('#adFestId-show').empty();

                                    //删除
                                    $('.adremove').on('click',function(){
                                        var ad_id = $(this).attr('data-id');
                                        $('.'+ad_id).remove();
                                    })
                                });
                        });
                        function splits(str,indexs){
                            if(indexs == 0){
                                return str.split('-')[0].toString();
                            }
                            if(indexs == 1){
                                return str.split('-')[1].replace('+',' ').toString();
                            }
                        }

                        //遍历部门  并选中部门状态 遍历部门关联
                        $('#departmment').empty().append('&lt;option value ='+vinfo['m_departmentId']+'&gt;'+vinfo['m_departmentName']+'&lt;/option&gt;')
                        $.each(awdata['departmentList'],function(key,value){
                            if(value['m_departmentId'] !== vinfo['m_departmentId']){    
                                $('#departmment').append('&lt;option value ='+value['m_departmentId']+'&gt;'+value['m_departmentName']+'&lt;/option&gt;');
                            }
                        });
                        $('#departmment').selectpicker('refresh');

                        //遍历标签功能
                        $('#select-tag').empty();
                        var labelarr = vinfo['tWorksAndLabelList'];
                        var baohan = new Array();
                        $.each(labelarr,function(key,value){
                            baohan.push(value['m_labelCode']); //获取选中的标签生成数组
                        });
                        $.each(awdata['worksLabelList'],function(key,value){
                            $('#select-tag').append(function(){
                                var html = '&lt;p&gt;'+value['m_labelName']+'&lt;/p&gt;';
                                    html +='&lt;ul class="list-inline"&gt;';
                                    $.each(value['worksLabelList'],function(k,v){
                                        if(baohan.contains(v['m_labelCode'])){
                                            html += '&lt;li&gt;&lt;span class="select_label" style="background-color: rgb(92, 184, 92);"  data-id='+v['m_labelCode']+'&gt;'+v['m_labelName']+'&lt;/span&gt;&lt;/li&gt;';
                                        }else{
                                            html += '&lt;li&gt;&lt;span  data-id='+v['m_labelCode']+'&gt;'+v['m_labelName']+'&lt;/span&gt;&lt;/li&gt;';
                                        }
                                    });
                                    html += '&lt;/ul&gt;';
                                return html;

                            })
                        });
                        //多选标签功能
                        $('#select-tag ul li span').click(function(){
                            var color_bg = $(this).css('background-color');
                            if(color_bg == "rgb(150, 150, 150)"){
                                $(this).css({"background-color":"#5cb85c"});
                                $(this).addClass('select_label');
                            }else{
                                $(this).css({"background-color":"#969696"});
                                $(this).removeClass('select_label');
                            }

                        });
                    }
                })


                //指定部门遍历广告主与品牌关联
                var m_departmentId = vinfo['m_departmentId']; //部门 id
                $.ajax({
                    url:'../selectAdvertiserList.do',  //获取广告主列表
                    dataType:'json',
                    type:'post',
                    data:{departId:m_departmentId},
                    success:function(datas){
                        //初始化 广告主 选中状态
                        var adbaohan = new Array();
                        $.each(datas['advertiserList'],function(key,value){
                            adbaohan.push(value['m_advertiserId']);
                        })
                        if(adbaohan.contains(vinfo['m_advertiserId'])){
                            $('#advertiser').append('&lt;option value="'+vinfo['m_advertiserId']+'"&gt;'+vinfo['m_advertiserName']+'&lt;/option&gt;');
                        }else{
                            $('#advertiser').append('&lt;option value=""&gt;请选择广告主&lt;/option&gt;');
                        }
                        //初始化 品牌 选择状态
                        if(vinfo['m_brandName']){
                            $('#brandsInfo').append('&lt;option value="'+vinfo['m_brandId']+'"&gt;'+vinfo['m_brandName']+'&lt;/option&gt;');
                        }else{
                            $('#brandsInfo').append('&lt;option value=""&gt;请选择品牌&lt;/option&gt;');
                        }
                        if(vinfo['m_advertiserId'] == 'a00001'){
                            $('.linshi_guanggao,.linshi_pinpai').removeClass('hide');
                            $('.linshi_guanggao').val(vinfo['t_advertiserName']);
                            $('.linshi_pinpai').val(vinfo['t_brandName']);
                        }else{
                            $('.linshi_guanggao,.linshi_pinpai').val('').addClass('hide');
                        }
                        $.each(datas['advertiserList'],function(key,value){
                            //遍历广告主列表
                            if(value['m_advertiserId'] !== vinfo['m_advertiserId']){
                                $('#advertiser').append('&lt;option value='+value['m_advertiserId']+'&gt;'+value['m_advertiserName']+'&lt;/option&gt;');
                            }
                        });
                        $('#advertiser').selectpicker('refresh'); 
                        //品牌初始化 显示全部
                        $.ajax({
                            url:'../selectBrandsList.do',
                            dataType:'json',
                            type:'post',
                            data:{advertId:vinfo['m_advertiserId'],departId:vinfo['m_departmentId']},
                            success:function(brchushi){
                                //console.log(brchushi);
                                if(brchushi.status == '200'){
                                    $.each(brchushi['brandsInfoList'],function(key,value){
                                        //console.log(vinfo);
                                        if(value['m_brandId'] !== vinfo['m_brandId']){
                                            $('#brandsInfo').append('&lt;option value='+value['m_brandId']+'&gt;'+value['m_brandName']+'&lt;/option&gt;');
                                        }
                                    });
                                }else{
                                    $('#brandsInfo').append('&lt;option value=""&gt;没有该广告主的品牌信息&lt;/option&gt;');
                                }
                                $('#brandsInfo').selectpicker('refresh');
                            }
                        });

                    }
                });

                //触发部门事件
                $('#departmment').on('changed.bs.select',function(){
                    var bumen_id = $(this).selectpicker('val');
                    $('.linshi_guanggao,.linshi_pinpai').val('').addClass('hide');
                    $.ajax({
                        url:'../selectAdvertiserList.do',
                        dataType:'json',
                        type:'post',
                        data:{departId:bumen_id},
                        success:function(bulist){
                            //console.log(bulist['advertiserList']);
                            $('#advertiser').empty().append('&lt;option value=""&gt;请选择广告主&lt;/option&gt;');
                            $.each(bulist['advertiserList'],function(k,v){
                                $('#advertiser').append('&lt;option value="'+v['m_advertiserId']+'"&gt;'+v['m_advertiserName']+'&lt;/option&gt;');
                            });
                            $('#advertiser').selectpicker('refresh'); //广告主刷新
                            $('#brandsInfo').empty().append('&lt;option value=""&gt;请选择品牌信息&lt;/option&gt;');
                            $('#brandsInfo').selectpicker('refresh');
                        }
                    })
                });

                //触发广告主事件
                $('#advertiser').on('changed.bs.select',function(){
                    var m_advertiserId = $(this).selectpicker('val'); //获取广告主的值
                    //console.log(m_advertiserId);
                    if(m_advertiserId == ''){  //不可初始化品牌
                        $('#brandsInfo').empty().append('&lt;option value=""&gt;没有该广告主的品牌信息&lt;/option&gt;');
                        $('#brandsInfo').selectpicker('refresh');
                        return false;
                    }
                    if(m_advertiserId == 'a00001'){
                        $('.linshi_guanggao,.linshi_pinpai').removeClass('hide');
                    }else{
                        $('.linshi_guanggao,.linshi_pinpai').val('').addClass('hide');
                    }
                    $.ajax({
                        url:'../selectBrandsList.do',
                        dataType:'json',
                        type:'post',
                        data:{advertId:m_advertiserId,departId:m_departmentId},
                        success:function(brdata){
                            $('#brandsInfo').empty();
                            if(brdata.status == '200'){
                                //alert('ss');
                                $.each(brdata['brandsInfoList'],function(key,value){
                                    $('#brandsInfo').append('&lt;option value='+value['m_brandId']+'&gt;'+value['m_brandName']+'&lt;/option&gt;');
                                });
                            }else{
                                $('#brandsInfo').append('&lt;option value=""&gt;没有该广告主的品牌信息&lt;/option&gt;');
                            }
                            $('#brandsInfo').selectpicker('refresh'); //刷新品牌select
                        }
                    });
                });


                // 封面图片显示
                $('#clipArea,#clipBtn').hide(); //初始化
                $('#view').css('background-image','').hide(); // 初始化
                $('#hiddenFile').val(''); //上传作品初始化
                $('#pickfiles b').text(''); // 作品数量初始化
                $('#filelist').empty(); //作品展示初始化
                //图片预览提示hover
                var path_array = new Array();
                $('.workLink-show .worklinks').remove(); // H5链接 每次编辑清空
                $.each(vinfo['tWorksPathInfoList'],function(key,value){
                    //console.log(value['t_worksPath']);
                    $('#thumb_img').show();
                    if(value['t_worksType'] == 0){
                        $('#thumb_img img').attr('src',value['t_worksPath']); //封面图片显示
                    }else if(value['t_worksType'] == 1){
                        //console.log(value);
                        var wordType = $('#filelist .oder_word').hasClass("oder_word");
                        if(value['t_thumbnailPath'] !== ''){
                            switch(value['t_fileType']){
                                case 'mp4':
                                    var html_mp4 = '&lt;img data-toggle="tooltip" data-placement="top" title="单击删除视频" src="'+value['t_thumbnailPath']+'" class="oder_mp4 path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                    $('#filelist').prepend(html_mp4);
                                    break;
                                case 'mp3':
                                    var op = $('#filelist .oder_mp4').hasClass("oder_mp4");
                                    var html_mp3 = '&lt;img data-toggle="tooltip" data-placement="top" title="单击删除音频" src="'+value['t_thumbnailPath']+'" class="oder_mp3 path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                    if(op){
                                        $('#filelist .oder_mp4:last').after(html_mp3);
                                    }else{
                                        $('#filelist').prepend(html_mp3);
                                    };
                                    break;
                                case 'jpg':
                                    var html = '&lt;img src='+value['t_thumbnailPath']+' data-toggle="tooltip" data-placement="top" title="单击删除图片" class="oder_img path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                    if(wordType){
                                        $('#filelist .oder_word:first').before(html);
                                    }else{
                                        $('#filelist').append(html);
                                    }
                                    break;
                                case 'png':
                                    var html = '&lt;img src='+value['t_thumbnailPath']+' data-toggle="tooltip" data-placement="top" title="单击删除图片" class="oder_img path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                    if(wordType){
                                        $('#filelist .oder_word:first').before(html);
                                    }else{
                                        $('#filelist').append(html);
                                    }
                                    break;
                                case 'jpeg':
                                    var html = '&lt;img src='+value['t_thumbnailPath']+' data-toggle="tooltip" data-placement="top" title="单击删除图片" class="oder_img path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                    if(wordType){
                                        $('#filelist .oder_word:first').before(html);
                                    }else{
                                        $('#filelist').append(html);
                                    }
                                    break;
                                case 'gif':
                                    var html = '&lt;img src='+value['t_thumbnailPath']+' data-toggle="tooltip" data-placement="top" title="单击删除图片" class="oder_img path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                    if(wordType){
                                        $('#filelist .oder_word:first').before(html);
                                    }else{
                                        $('#filelist').append(html);
                                    }
                                    break;
                                default:
                                    var imgtype = $('#filelist .oder_img').hasClass("oder_img");
                                    var html_word = '&lt;img src='+value['t_thumbnailPath']+' data-toggle="tooltip" data-placement="top" title="单击删除文档" class="oder_word path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                    if(imgtype){
                                        $('#filelist .oder_img:last').after(html_word);
                                    }else{
                                        $('#filelist').append(html_word);
                                    }
                                }
                        }else{
                            //转码中
                            if(value['t_fileType'] == 'mp4'){
                                var html_mp4 = '&lt;img data-toggle="tooltip" data-placement="top" title="单击删除视频" src="../view/assets/img/play.jpg" class="oder_mp4 path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                $('#filelist').prepend(html_mp4);
                            }else if(value['t_fileType'] == 'mp3'){
                                var op = $('#filelist .oder_mp4').hasClass("oder_mp4");
                                var html_mp3 = '&lt;img data-toggle="tooltip" data-placement="top" title="单击删除音频" src="../view/assets/img/music.jpg" class="oder_mp3 path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                if(op){
                                    $('#filelist .oder_mp4:last').after(html_mp3);
                                }else{
                                    $('#filelist').prepend(html_mp3);
                                };
                            }else{
                                if(value['t_fileType'] == 'html'){ //是否为H5链接
                                    var strVar = "&lt;div class=\"worklinks\" style=\"margin-top: 5px;margin-bottom:8px\"&gt;";
                                        strVar += "&lt;input type=\"hidden\" class=\"linkId\" value="+value['t_worksPathId']+" /&gt;&lt;label class=\"lab\" style=\"width:50px;\"&gt;名称&lt;\/label&gt; &lt;input type=\"text\" class=\"form-control linkname input-sm\" style=\"width:25%\" value="+value['t_fileName']+" placeholder=\"例如：电通官网\"/&gt;&lt;label class=\"lab\" style=\"width:50px;\"&gt;网址&lt;\/label&gt; &lt;input type=\"text\" class=\"form-control linkurl input-sm\" style=\"width:46%\" value="+value['t_worksPath']+" placeholder=\"例如：http://www.beijing-dentsu.com.cn\"/&gt;\n";
                                        strVar += "&lt;span class=\"btn btn-danger btn-sm linkquxiaos\" data-id="+value['t_worksPathId']+"&gt;&lt;i class=\"glyphicon glyphicon-remove\"&gt;&lt;/i&gt;&lt;\/span&gt;\n";
                                        strVar += "&lt;/div&gt;"
                                    $('.workLink-show').append(strVar);

                                    // var html = '&lt;div  style="margin-bottom:10px;"&gt;';
                                    //  //html += '&lt;label class="lab" style="width:50px;"&gt;名称:&lt;/label&gt; '+value['t_fileName'];
                                    //  html += '&lt;label class="lab" style="width:50px;"&gt;名称：&lt;/label&gt;&lt;input type="text" class="form-control linkurl input-sm" style="width:25%" placeholder="例如：电通官网" value='+value['t_fileName']+'&gt;';
                                    //  //html += '&lt;label class="lab" style="width:50px;"&gt;网址:&lt;/label&gt; '+value['t_worksPath'];
                                    //  html += '&lt;label class="lab" style="width:50px;"&gt;网址：&lt;/label&gt;&lt;input type="text" class="form-control linkurl input-sm" style="width:46%" placeholder="例如：http://www.beijing-dentsu.com.cn" value='+value['t_worksPath']+'&gt;';
                                    //  html += ' &lt;span class="btn btn-danger btn-xs linkquxiao" data-id='+value['t_worksPathId']+'&gt;&lt;i class="glyphicon glyphicon-remove"&gt;&lt;/i&gt;&lt;/span&gt;';
                                    // $('.workLink-show').append(html);
                                }else{
                                    var html = '&lt;img src="../view/assets/img/zhuanma_edit.jpg" data-toggle="tooltip" data-placement="top" title="单击删除" class="oder_img path-id" data-id='+value['t_worksPathId']+' /&gt;';
                                    $('#filelist').append(html);
                                }
                            }
                        }
                    }
                });
                $('[data-toggle="tooltip"]').tooltip();
                $('#filelist img').hover(function(){
                    $(this).css('border','1px solid red');
                },function(){
                    $(this).css('border','0px');
                });
                $('#filelist img').click(function(){
                    $(this).hide();
                    var id = $(this).attr('data-id');
                    path_array.push(id);
                    $('#delFileParas').val(path_array.join(","));  //赋值 用来删除旧资源文件
                    $('#delFileParas').attr('name','delFileParas');
                });
                $('.linkquxiaos').on('click',function(){
                    $(this).parent().remove();
                    var id = $(this).attr('data-id');
                    path_array.push(id);
                    $('#delFileParas').val(path_array.join(","));  //赋值 用来删除旧资源 H5链接
                    $('#delFileParas').attr('name','delFileParas');
                });

            }
        })
    })
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:12:03
 * @description: 删除作品 this指定 ID
 */
function del_view(){
    $('.del').click(function(){
        var del_id = $(this).attr('data-id');
        //询问框
        layer.confirm('删除之后不可恢复，确定删除？', {
          btn: ['确定','取消'] //按钮
        }, function(){
            //进行相应操作之后 执行下面
            $.ajax({
                url:'../deleteWorksInfo.do',
                type:'post',
                dataType:'json',
                data:{worksId:del_id},
                success:function(data){
                    //console.log(data);
                    if(data.status == 200){
                        $('.del'+del_id).fadeOut('300');
                        layer.msg('删除成功', {icon: 1});
                    }
                }
            })

        });
    })
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:12:40
 * @description: 提交更新保存
 */
$('#uploadForm').submit(function(){
    var adArray = new Array();
    $('.adList .ad_id_list').each(function(){
        var adFestId = $(this).children().children().eq(0).attr('data-id');
        var adFestYearId = $(this).children().children().eq(1).attr('data-id');
        var adFestAwardId = $(this).children().children().eq(2).attr('data-id');
        for(var i = 0;i&lt; $('.ad_id_list').length;i++){
            var adString = adFestId+';'+adFestYearId+';'+adFestAwardId;
        }
        adArray.push(adString);
    });
    var worksName      = $('#up_worksName').val().trim(); //作品名称
    if(!worksName){
        $('#error').show().text('作品名称不能为空!');
        return false;
    };
    if(worksName.length &gt;= 30){
        $('#error').show().text('作品名称太长了,不可超过15字');
        return false;
    };
    //H5链接
    var worklink = $('.workLink-show').children().hasClass('worklinks');
    var worksLink = new Array();
    if(worklink){
        $('.worklinks').each(function(){
            var linkId = $(this).find('.linkId').val();
            var linkUrl = $(this).find('.linkurl').val();
            var linkName = $(this).find('.linkname').val();
            if(linkUrl=='' || linkName=='' ){
                $(this).addClass('has-error');
                $('#error').show().text('H5作品名称或网址不能为空！');
                H5s = 0;
                //return false;
            }else{
                $(this).removeClass('has-error');
                var bo = {linkId:linkId,linkName:linkName,linkUrl:linkUrl};
                //console.log(bo);
                worksLink.push(bo);
            }
        });
    };
    var H5s;
    if(H5s == 0){
        H5s = 1;
        return false;
    }
    //校验团队名单
    var ko = 0;
    $('#chuangzuo-ajax input').each(function(k,v){
        var cv = $(this).val();
        if(cv !== ''){
            ko = 1;
        }
    });
    if(ko == 0){
        $('#error').show().text('公司内部 业务团队必填其中一个');
        return false;
    };

    var sub_bumen = $('#departmment').val(); //部门 sub_bumen
    if(!sub_bumen){
        $('#error').show().text('请选择所属部门');
        return false;
    };
    var worksimage     = $('#view').css('background-image');
    if(worksimage == 'none'){
        var thumb_base = "";
    }else{
        var base = worksimage.substr(worksimage.indexOf(",", 1) + 1);
        var base = worksimage.split(",");
        var thumb_base = base[1].substr(0,base[1].indexOf(')'));
    };

    var m_labelCode    = new Array();  //标签数组
    $('#select-tag .select_label').each(function(key){
        var tag_id = $(this).attr('data-id');
        m_labelCode.push(tag_id);
    });
    var vertId = $('#advertiser').val();
    if(vertId == ''){
        $('#error').show().text('请选择广告主');
        return false;
    };
    var linshiGuanggao = $('.linshi_guanggao').val();  //临时性客户 自定义广告主
    // if(vertId == 'a00001' &amp;&amp; linshiGuanggao == ''){
    //  $('#error').show().text('请填写广告主');
    //  return false;
    // }
    var linshiPinpai = $('.linshi_pinpai').val(); //获取临时性客户 品牌
    //出街时间
    var publishDateYear = $('#publishDateYear').val();
    var publishDateMoth = $('#publishDateMoth').val();
    var publishDate = "";
    if(publishDateYear == '' || publishDateMoth == ''){
        $('#error').show().text('请填写发布时间');
        return false;
    }else{
        var t_publishDate = $('#t_publishDate').val();
        if(publishDateYear == ''){
            publishDateYear = dateSplic(t_publishDate,0)
        }
        if(publishDateMoth == ''){
            publishDateMoth = dateSplic(t_publishDate,1);
        }
        publishDate = publishDateYear+'-'+publishDateMoth;
    };
    //验证通过之后执行 
    $('#error').hide(); //隐藏错误提示
    $('.loadingtext').show(); 
    $('.btn-dis').attr('disabled','disabled'); //禁止重复提交
    //检验
    var option = {
            data:{
                publishDate:publishDate,
                advertName:linshiGuanggao,
                brandName:linshiPinpai,
                worksName:worksName,
                labelList:m_labelCode.join(","),
                worksAwardList:adArray.join(","),
                worksImage:thumb_base,
                worksLink:worksLink
            },
            uploadProgress: function(event, position, total, percentComplete) {
                $('.progress-bar').css('width',percentComplete+'%').text(percentComplete+'%');
                //console.log(event,percentComplete, position, total);
            },
            dataType:'json',
            success:function(data){
                $('loadingtext').hide();
                $('.progress-bar').css('width','100%').text('100%');
                if(data.status == "200"){
                    layer.alert('上传完成,提交成功!', {icon: 6,title:false,closeBtn:false,btn:['确定']},function(){
                        window.location.reload() ; //刷新
                    }); 
                }
            }
        };
         //console.log(option);
    $(this).ajaxSubmit(option);
    return false;
})

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-10 10:06:46
 * @description: 新增作品内 作品链接功能 
 */
function workLink(){
    $('.addLink').on('click',function(){
        var strVar = "&lt;div class=\"worklinks\" style=\"margin-top:5px;margin-bottom:8px\"&gt;";
            strVar += "&lt;input type=\"hidden\" class=\"linkId\" value=\"\" /&gt;&lt;label class=\"lab\" style=\"width:50px;\"&gt;名称&lt;\/label&gt; &lt;input type=\"text\" class=\"form-control linkname input-sm\" style=\"width:25%\" placeholder=\"例如：电通官网\"/&gt;&lt;label class=\"lab\" style=\"width:50px;\"&gt;网址&lt;\/label&gt; &lt;input type=\"text\" class=\"form-control linkurl input-sm\" style=\"width:46%\" placeholder=\"例如：http://www.beijing-dentsu.com.cn\"/&gt;\n";
            strVar += "&lt;span class=\"btn btn-danger btn-sm linkquxiao\"&gt;&lt;i class=\"glyphicon glyphicon-remove\"&gt;&lt;/i&gt;&lt;\/span&gt;\n";
            strVar += "&lt;/div&gt;"
        $('.workLink-show').append(strVar);
        $('.linkquxiao').on('click',function(){
            $(this).parent().remove();
        })
    })
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-10-24 15:55:20
 * @description: 作品批量选择 input样式
 */
$('#pickfiles').click(function(){
    return $('#hiddenFile').click();
});
$('#hiddenFile').change(function(){
    var k = $(this).val();
    var m = $(this).get(0).files;
    $('#pickfiles b').text(' '+m.length+'个文件');
    //$('#filelist').hide();
    $('.imgUpList').empty();
    $.each(m,function(key,value){
        //console.log(value);
        $('.imgUpList').prepend('&lt;li id="img'+key+'"&gt;&lt;img src="../view/assets/img/loading.gif"&gt;&lt;/li&gt;');
        switch(value['type']){
            case 'audio/mp3':
                $('#img'+key).html('&lt;img src="../view/assets/img/music.jpg" width="80"/&gt;');
                break;
            case 'audio/mpeg':
                $('#img'+key).html('&lt;img src="../view/assets/img/music.jpg" width="80"/&gt;');
                break;
            case 'video/mp4':
                $('#img'+key).html('&lt;img src="../view/assets/img/play.jpg" width="80"/&gt;');
                break;
            case 'application/vnd.ms-excel':
                $('#img'+key).html('&lt;img src="../view/assets/img/xls.png" width="80"/&gt;');
                break;
            case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
                $('#img'+key).html('&lt;img src="../view/assets/img/xlsx.png" width="80"/&gt;');
                break;
            case 'text/csv':
                $('#img'+key).html('&lt;img src="../view/assets/img/csv.png" width="80"/&gt;');
                break;
            case 'application/pdf':
                $('#img'+key).html('&lt;img src="../view/assets/img/pdf.png" width="80"/&gt;');
                break;
            case 'application/vnd.ms-powerpoint':
                $('#img'+key).html('&lt;img src="../view/assets/img/ppt.png" width="80"/&gt;');
                break;
            case 'application/msword':
                $('#img'+key).html('&lt;img src="../view/assets/img/doc.png" width="80"/&gt;');
                break;
            case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
                $('#img'+key).html('&lt;img src="../view/assets/img/pptx.png" width="80"/&gt;');
                break;
            case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
                $('#img'+key).html('&lt;img src="../view/assets/img/docx.png" width="80"/&gt;');
                break;
            default:
                var reader = new FileReader();  
                reader.readAsDataURL(value); 
                reader.onloadend = function(e){
                        $('#img'+key).html('&lt;img src='+this.result+' width="80"/&gt;');
                    }
            }
    });
    var file_name_attr = $('#hiddenFile').get(0).files;
    if(file_name_attr.length !== 0){
        $('#hiddenFile').attr('name','worksFile');
        var imglist = $('#hiddenFile').get(0).files;
    }else{
        $('#hiddenFile,#delFileParas').removeAttr('name');
    }

    //console.log(m.length);
});
//判断格式
function type_work(pathName){
    var type = pathName.substring(pathName.lastIndexOf(".")+1,pathName.length);
    return type.toLowerCase();
}
//裁剪图片
$("#clipArea").photoClip({
    width: 300,
    height: 300,
    file: "#file",
    view: "#view",
    ok: "#clipBtn",
    loadStart: function() {
        //console.log("照片读取中");
        $('.clip_loading').removeClass('hide');
        $('#thumb_img,#view').hide();
        $('#view').hide();
    },
    loadComplete: function() {
        $('.clip_loading').addClass('hide');
        $('#clipArea').css({"position":'static',"display":'block'});
        $('#clipBtn').css("display","block");

        //console.log("照片读取完成");
    },
    clipFinish: function(dataURL) {
        $('#clipArea,#clipBtn').hide();
        $('#view').show();
        //console.log(dataURL);
    }
});

//封装数组是否包含所在的标签
Array.prototype.contains = function ( needle ) {
  for (i in this) {
    if (this[i] == needle) return true;
  }
  return false;
}

//切换缩略图
$('#large').click(function() {
    $('.list-tab').removeClass('active_tab');
    $(this).addClass('active_tab');

    $('.ajax-newlist').hide();

    $('#type').val('1');
    clear_list();
    ajaxpost(1);
});

//切换列表
$('#list').click(function() {
    $('.list-tab').removeClass('active_tab');
    $(this).addClass('active_tab');

    $('.ajax-newlist').show();

    $('#type').val('0');
    clear_list();
    ajaxpost(1);
})

//加载更多事件触发
$('.loading_list').click(function(){
    var page = $('#page').val();
    ajaxpost(page);
    page++;
    $('#page').val(page);
})

var stop = true;//触发开关，防止多次调用事件
$(window).scroll(function(){
    if($(this).scrollTop() + $(window).height() + 100 &gt;= $(document).height() &amp;&amp; $(this).scrollTop() &gt; 200){
        if(stop == true){
            stop = false;
            var page = $('#page').val();
            ajaxpost(page);
            page++;
            $('#page').val(page);
        }
    }
})

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:13:20
 * @description: 初始化必须清空数据再继续加载，否则出现重复数据
 */
function clear_list(){
    $('#page').val('2'); //分页初始化
    $('.ajax-newlist,.ajax-hotlist').empty(); //初始化list
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:13:44
 * @description: 分页加载loading状态
 */
function loading_page(text){
    if(text){
        $('.loading_list').removeClass('btn-primary').addClass('btn-default').show().text(text);
    }else{
        $('.loading_list').removeClass('btn-default').addClass('btn-primary').show().text('加载更多');
    }
}

/**
 * 
 * @author:      Yang.Sun@dentsu.com.cn
 * @dateTime:    2017-11-01 17:14:22
 * @description: GET url获取
 */
function getQueryString(name) { 
    var reg = new RegExp("(^|&amp;)" + name + "=([^&amp;]*)(&amp;|$)", "i"); 
    var r = window.location.search.substr(1).match(reg); 
    if (r != null) return decodeURIComponent(r[2]); return null; 
}
</code></pre>
<p>})</p></article></body></html>